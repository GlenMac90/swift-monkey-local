"use client";

import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { useInView } from "react-intersection-observer";

import { rocketPatternPaths } from "@/constants";

const Rocket = () => {
  const [showRocket, setShowRocket] = useState(false);
  const { ref, inView } = useInView();

  useEffect(() => {
    if (!inView) return;
    setShowRocket(true);
  }, [inView]);

  return (
    <div ref={ref} className="flex h-fit w-full justify-center">
      {showRocket && (
        <svg
          width="471"
          height="222"
          viewBox="0 0 471 222"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_57_2999)">
            <motion.path
              initial={{ opacity: 0, x: -10, y: 10 }}
              animate={{ opacity: 1, x: 0, y: 0, scale: [1, 1.1, 1] }}
              transition={{ duration: 0.5, delay: 1 }}
              d="M442.441 139.575L430.021 140.046L424.234 151.46L423.039 152.749C421.055 154.89 421.182 158.218 423.322 160.202C425.462 162.186 428.79 162.059 430.774 159.919L431.969 158.63L442.912 151.996L442.441 139.575ZM421.956 148.3C422.524 148.169 422.988 147.767 423.2 147.223C424.386 144.17 427.109 139.632 430.485 135.084C430.827 134.621 430.922 134.022 430.737 133.476C430.359 132.352 429.264 132.307 429.035 132.196C428.685 132.094 420.356 129.787 412.537 138.222C406.63 144.595 410.272 148.107 410.43 148.253C411.142 148.913 412.254 148.871 412.914 148.158C414.891 146.026 418.234 145.899 420.366 147.876C420.793 148.271 421.388 148.43 421.956 148.3ZM449.41 150.784C448.852 150.642 448.261 150.782 447.825 151.158C443.396 154.996 439.192 157.976 436.287 159.333C435.757 159.581 435.385 160.076 435.294 160.654C435.205 161.232 435.407 161.817 435.836 162.215C437.969 164.192 438.096 167.535 436.119 169.668C435.458 170.38 435.501 171.491 436.213 172.152C436.371 172.298 440.148 175.664 446.056 169.291C453.874 160.856 450.944 152.725 450.815 152.387C450.693 152.177 450.556 151.074 449.41 150.784ZM466.875 114.767C466.722 114.002 466.103 113.428 465.328 113.333C464.879 113.3 458.214 112.682 450.009 115.431L455.528 125.341L465.943 130.201C468.063 121.812 466.942 115.212 466.875 114.767ZM444.454 127.061C441.825 129.897 441.995 134.368 444.831 136.997C447.693 139.65 452.139 139.457 454.768 136.62C457.421 133.759 457.253 129.337 454.391 126.684C451.555 124.055 447.107 124.199 444.454 127.061Z"
              fill="url(#paint0_linear_57_2999)"
            />
            <motion.path
              initial={{ opacity: 0, x: -10, y: 10 }}
              animate={{ opacity: 1, x: 0, y: 0, scale: [1, 1.1, 1] }}
              transition={{
                duration: 0.5,
                delay: 1,
                scale: {
                  duration: 0.3,
                },
              }}
              d="M450.009 115.431C444.628 117.203 438.606 120.441 433.228 126.242C431.46 128.15 429.533 130.487 427.662 132.971C424.113 137.783 421.212 142.619 419.945 145.951C419.671 146.608 419.825 147.374 420.366 147.876L424.234 151.461L432.599 142.436C434.582 140.296 437.911 140.17 440.051 142.154C442.217 144.161 442.341 147.44 440.334 149.606L431.969 158.63L435.836 162.215C436.352 162.693 437.128 162.838 437.763 162.515C440.965 161.026 445.473 157.869 450.145 153.812C452.48 151.758 454.665 149.66 456.433 147.752C461.811 141.951 464.584 135.701 465.942 130.201L450.009 115.431ZM454.767 136.62C452.138 139.457 447.693 139.65 444.831 136.997C441.995 134.368 441.825 129.897 444.454 127.061C447.107 124.199 451.554 124.055 454.391 126.684C457.253 129.337 457.42 133.759 454.767 136.62ZM420.954 162.781C420.242 162.121 419.131 162.163 418.47 162.875L409.72 172.29C409.059 173.003 409.101 174.114 409.814 174.774C410.526 175.434 411.637 175.392 412.298 174.68L421.049 165.265C421.709 164.552 421.667 163.441 420.954 162.781ZM423.627 167.655L421.237 170.233C420.576 170.946 420.618 172.057 421.331 172.717C422.044 173.378 423.155 173.336 423.815 172.623L426.205 170.045C426.866 169.332 426.824 168.221 426.111 167.561C425.398 166.9 424.287 166.942 423.627 167.655ZM413.502 163.063L415.892 160.485C416.552 159.773 416.51 158.662 415.798 158.001C415.085 157.341 413.974 157.383 413.313 158.095L410.924 160.674C410.263 161.386 410.305 162.497 411.018 163.158C411.73 163.818 412.841 163.776 413.502 163.063Z"
              fill="#218B81"
            />
          </g>
          {rocketPatternPaths.map((path, index) => (
            <motion.path
              key={path}
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              viewport={{ once: true }}
              transition={{ duration: 0.5, delay: 0.02 * index }}
              d={path}
              fill="#435989"
            />
          ))}
          <defs>
            <linearGradient
              id="paint0_linear_57_2999"
              x1="423.323"
              y1="160.193"
              x2="466.33"
              y2="113.797"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#C3FFF9" />
              <stop offset="0.5028" stopColor="#F2FFFE" />
              <stop offset="1" stopColor="#EFFFFD" />
            </linearGradient>
            <clipPath id="clip0_57_2999">
              <rect
                width="60"
                height="60"
                fill="white"
                transform="translate(407.045 115.352) rotate(-2.17128)"
              />
            </clipPath>
          </defs>
        </svg>
      )}
    </div>
  );
};

export default Rocket;
